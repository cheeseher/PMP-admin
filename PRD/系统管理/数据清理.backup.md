# 数据清理

## 页面功能

用于定期清理系统中的历史数据、日志等，以保持系统性能。

## 商户订单清理

### 字段说明

| 字段 | 字段含义 | 交互类型 | 是否必填 | 备注 |
| --- | --- | --- | --- | --- |
| 保留最近订单 | 选择要保留的最近订单天数 | 下拉选择 | 是 | 提供 7、30、60、90、180 天选项 |
| 自动清理 | 是否开启自动清理功能 | 开关 | 是 | 默认为关闭。 |
| 清理时间点 | 当“自动清理”开启时，选择每日执行清理任务的具体时间 | 时间选择 | 是 | 仅在“自动清理”开启时显示。 |
| 订单状态 | 选择要清理的订单状态 | 下拉多选 | 否 | 默认为空，表示清理所有状态的订单。<br>可选状态：<br>- `created`: 订单创建<br>- `success`: 交易成功<br>- `pending`: 待付款<br>- `failed`: 交易失败<br>- `canceled`: 交易撤销<br>- `reorder_success`: 补单成功<br>- `closed`: 交易关闭 |

### 交互说明

- “执行一次性清理”按钮用于执行单次的手动清理任务，该操作不会保存任何配置。
- “保存设置”按钮用于保存“保留最近订单”、“自动清理”和“清理时间点”的配置，供后台自动执行。
- 用户可以开启或关闭自动清理功能。
- 当“自动清理”开启时，用户需要指定一个每日执行清理的时间点。
- 点击任一按钮后，会弹出风险提示，确认后执行相应操作。
- 清理操作为后台异步执行，前端给出“任务已开始执行”的提示。

## 其他清理

### 字段说明

| 字段 | 字段含义 | 交互类型 | 是否必填 | 备注 |
| --- | --- | --- | --- | --- |
| 清理范围 | 选择要清理的数据类型 | 复选框组 | 是 | 可多选。 |
| 保留最近数据 | 选择要保留的最近数据天数 | 下拉选择 | 是 | 提供 7、30、60、90、180 天选项 |
| 自动清理 | 是否开启自动清理功能 | 开关 | 是 | 默认为关闭。 |
| 清理时间点 | 当“自动清理”开启时，选择每日执行清理任务的具体时间 | 时间选择 | 是 | 仅在“自动清理”开启时显示。 |

### 交互说明

- “执行一次性清理”按钮用于执行单次的手动清理任务，该操作不会保存任何配置。
- “保存设置”按钮用于保存“清理范围”、“保留最近数据”、“自动清理”和“清理时间点”的配置，供后台自动执行。
- 用户可以选择一个或多个数据类型进行清理。
- 用户可以开启或关闭自动清理功能。
- 当“自动清理”开启时，用户需要指定一个每日执行清理的时间点。
- 点击任一按钮后，会弹出风险提示，确认后执行相应操作。