# 商户订单管理

## 页面概述
商户订单管理页面用于展示和管理所有商户的支付订单，提供订单查询、状态管理、手动操作等功能。

## 核心功能
- 订单列表展示与查询
- 订单状态管理
- 手动操作功能（回调、补单、失败等）
- 订单详情查看
- 数据导出功能

## 字段说明

### 订单信息字段
| 字段名 | 字段含义 | 是否必填 | 是否唯一 | 交互类型 | 说明 |
|--------|----------|----------|----------|----------|------|
| orderNo | 平台单号 | 是 | 是 | 文本显示 | 系统自动生成 |
| merchantOrderNo | 商户单号 | 是 | 否 | 文本显示 | 商户系统订单号 |
| merchantName | 商户名称 | 是 | 否 | 下拉选择 | 支持搜索，精准匹配 |
| productName | 产品名称 | 是 | 否 | 文本显示 | 支付产品名称 |
| orderAmount | 订单金额 | 是 | 否 | 文本显示 | 原始订单金额 |
| receiveAmount | 入账金额 | 是 | 否 | 文本显示 | 扣除手续费后的金额 |
| fee | 手续费 | 是 | 否 | 文本显示 | 商户手续费 |
| orderStatus | 订单状态 | 是 | 否 | 状态标签 | 见状态枚举说明 |
| createTime | 创建时间 | 是 | 否 | 文本显示 | 订单创建时间 |
| completeTime | 完成时间 | 否 | 否 | 文本显示 | 订单完成时间 |
| isNextDay | 隔日补单 | 是 | 否 | 状态标签 | 是否隔日补单 |

### 订单状态枚举
| 状态值 | 状态名称 | 状态颜色 | 操作权限 |
|--------|----------|----------|----------|
| created | 订单创建 | 灰色 | 查看、编辑 |
| pending | 付款中 | 蓝色 | 手动回调、修改金额、补单 |
| success | 交易成功 | 绿色 | 手动失败 |
| failed | 交易失败 | 红色 | 重新推送 |
| canceled | 已撤销 | 灰色 | 查看 |
| reorder_success | 补单成功 | 绿色 | 手动失败 |

## 筛选项说明
| 筛选项 | 搜索类型 | 说明 |
|--------|----------|------|
| 时间范围 | 时间段选择 | 支持创建时间和完成时间筛选 |
| 订单号 | 模糊搜索 | 支持平台单号和商户单号 |
| 商户名称 | 精准匹配 | 下拉选择，支持搜索 |
| 产品名称 | 精准匹配 | 下拉选择 |
| 订单状态 | 多选 | 支持下拉多选 |
| 订单金额 | 范围输入 | 支持最小和最大金额筛选 |
| 隔日补单 | 单选 | 是/否/全部 |

## 操作功能说明

### 表格操作列
操作列采用下拉菜单形式，根据订单状态显示不同的操作选项：

#### 订单创建状态
- 查看详情：查看订单详细信息
- 编辑：编辑订单基本信息

#### 付款中状态
- 手动回调：触发商户回调
- 修改金额：修改订单金额
- 手动补单：手动标记为成功
- 查看详情：查看订单详细信息
- 编辑：编辑订单基本信息

#### 交易成功状态
- 手动失败：**新增功能** - 将订单状态变更为交易失败
- 查看详情：查看订单详细信息
- 编辑：编辑订单基本信息

#### 交易失败状态
- 重新推送：重新推送订单状态
- 查看详情：查看订单详细信息
- 编辑：编辑订单基本信息

#### 补单成功状态
- 手动失败：**新增功能** - 将订单状态变更为交易失败
- 查看详情：查看订单详细信息
- 编辑：编辑订单基本信息

#### 已撤销状态
- 查看详情：查看订单详细信息
- 编辑：编辑订单基本信息

### 手动失败功能详细说明
**功能描述**：对于交易成功和补单成功的订单，提供手动失败功能，允许将订单状态强制变更为交易失败状态。

**操作流程**：
1. 点击操作列下拉菜单中的"手动失败"选项
2. 系统弹出确认对话框："确定要将该订单变更为交易失败状态吗？"
3. 用户点击"确定"后执行状态变更
4. 订单状态从"success"/"reorder_success"变更为"failed"
5. 订单完成时间保持不变
6. 表格数据实时更新

**业务规则**：
- 仅交易成功（success）和补单成功（reorder_success）状态的订单显示此选项
- 执行后订单状态立即更新，无需刷新页面
- 订单完成时间字段保持不变
- 操作记录需要记录到系统日志中

**异常处理**：
- 如果状态变更失败，显示错误提示
- 如果订单状态已变更，提示"订单状态已变更，请刷新后重试"

## 批量操作
- 批量导出：导出选中的订单数据
- 批量推送：批量重新推送订单状态

## 数据统计
页面顶部显示订单数据统计卡片：
- 总订单数：当前筛选条件下的订单总数
- 总利润：所有订单的手续费总和
- 成功率：成功订单数/总订单数
- 成功金额：成功订单的金额总和
- 成功单数：成功订单的数量
- 补单单数：补单成功的订单数量
- 总手续费：所有订单的手续费总和
- 通道成本：上游通道成本总和

## 交互规范
- 所有操作需要二次确认
- 状态变更后需要实时更新表格数据
- 错误操作需要给出明确的错误提示
- 成功操作需要给出成功提示
- 长时间操作需要显示加载状态

## 页面布局与筛选说明
- 筛选区采用流式 flex 布局，左到右自动换行（wrap），不固定列数
- 间距规则：行间距 `8px`、列间距 `12px`，整体紧凑，避免多余留白
- 时间筛选项包含时间类型下拉与日期范围选择，位于同一行内横向排列
- 下拉选择器统一宽度为 `168px`，输入框宽度按控件类型适配，保持紧凑
- 筛选按钮行独立靠右排布，避免与筛选项混排