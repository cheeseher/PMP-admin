# 思方支付管理系统 - 供应商通道管理

## 业务目标

建立完善的供应商通道管理机制，实现对上游支付通道的有效管理，包括通道信息维护、状态控制、分组管理和拉单测试，确保支付系统能够高效调用各类支付通道，为商户提供稳定的支付服务。

## 业务逻辑

### 通道查询逻辑

**查询条件**:
- 供应商通道ID：精确匹配通道唯一标识
- 通道名称：模糊匹配通道展示名称
- 通道编码：模糊匹配通道业务编码

### 通道信息管理

**基础信息**:
- 通道名称（必填）：系统内展示的通道名称，便于识别
- 通道编码（必填）：系统内部使用的通道唯一编码
- 通道费率（必填）：通道提供方收取的费率，精确到小数点后两位的百分比
- 上游通道：
  - 上游通道名称（必填）：来自供应商的实际通道名称
  - 上游通道编码（自动关联）：来自供应商的实际通道编码
- 支付类型（必填）：该通道支持的支付方式，如网银、扫码等
- 分组：用于对通道进行业务分类，便于统一管理

**金额限制**:
- 单笔最小金额：通道支持的最小交易金额
- 单笔最大金额：通道支持的最大交易金额，超过此金额不可使用该通道

**通道状态管理**:
- 状态切换：支持单个通道状态开启/关闭
- 批量操作：支持批量删除选中通道
- 安全验证：删除通道前需确认，防止误操作

### 通道分组管理

**分组功能**:
- 自定义分组：可以为通道设置自定义分组名称
- 批量设置：支持对多个选中通道统一设置分组
- 分组用途：便于按业务场景快速筛选和调用相关通道

### 拉单测试功能

**测试流程**:
- 选择通道：指定需要测试的供应商通道
- 设置金额：指定测试交易的金额，需在通道限额范围内
- 发起测试：系统向该通道发送模拟交易请求
- 结果验证：验证通道是否正常响应并处理交易请求

**测试约束**:
- 测试金额必须在通道设置的最小和最大金额范围内
- 测试前需确认通道状态为开启状态
- 测试结果需记录日志，便于排查问题

### 通道数据导出

- 支持将符合当前筛选条件的供应商通道数据导出为Excel文件
- 导出数据包含通道基本信息、费率、限额和状态等关键信息
- 导出文件命名规则：供应商通道数据_YYYYMMDD_HHMMSS.xlsx

## 业务规则与约束

### 通道唯一性

- 系统内通道编码必须唯一，不允许重复
- 同一上游的不同通道需使用不同的通道编码区分

### 费率规则

- 通道费率不得为负数
- 通常费率设置范围在0-20%之间
- 费率变更会影响平台利润，需谨慎操作

### 金额限制规则

- 最小金额必须大于等于0
- 最大金额必须大于最小金额
- 当通道有特殊限制时，需在备注中说明

### 通道状态影响

- 关闭状态的通道不会参与交易路由
- 批量删除操作不可恢复，需谨慎使用

## 权限控制

- 查看权限：具有"供应商管理/查看"权限的角色可访问通道列表
- 操作权限：
  - 新增通道：需要"供应商管理/新增"权限
  - 编辑通道：需要"供应商管理/编辑"权限
  - 删除通道：需要"供应商管理/删除"权限
  - 拉单测试：需要"供应商管理/测试"权限
- 数据范围权限：管理员可能被限制只能查看和管理特定范围的供应商通道 