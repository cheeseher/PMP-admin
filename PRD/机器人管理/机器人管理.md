# 机器人管理 PRD

## 背景与目标
将机器人管理页面恢复为仅支持传统 Telegram Bot 的形态，移除此前新增的“客户端账户”类型及其配对令牌、配对状态等相关功能，确保文档与实现一致。

## 业务范围
- 管理 Telegram Bot（传统机器人）：创建、编辑、启用/停用、删除。
- 新增“普通账号”标签页：管理运营/客服等账号信息（用户名、状态、创建人、创建时间），支持新增、编辑、删除与分页。
- 不再支持“客户端账户”类型；不涉及配对令牌、取消配对等交互。

## 页面结构
### 标签页
- 页面包含 `el-tabs` 两个页签：
  - 机器人列表（默认）：展示并管理传统机器人。
  - 普通账号：展示并管理运营/客服等普通账号，提供“新增普通账户”按钮。

### 列表页
- 筛选项：
  - 当页签为“机器人列表”时：机器人名称（`botName`）、状态（`status`）。
  - 当页签为“普通账号”时：账号名称（`name`）、状态（`status`）。
- 表格列：
  - 机器人列表：机器人名称、机器人用户名、状态、创建人、创建时间、操作（编辑、删除）。
  - 普通账号：名称、TGID、手机号、apiid、状态、创建人、创建时间、操作（编辑、删除）。

### 新增/编辑弹窗
- 机器人弹窗表单字段：机器人名称（必填）、机器人用户名（必填）、Bot Token（必填）、启用开关。
- 普通账号弹窗表单字段：名称（必填，至少2字符）、手机号（必填，示例：`+66123456789`）、apiid（必填）、apihash（必填）、二级密码（非必填）、启用开关。
- 校验：
  - 机器人名称长度 2–50 字符；用户名规则与 token 非空校验。
  - 普通账号：名称长度≥2，手机号、apiid、apihash 需非空；二级密码可留空；保存时弹出验证码输入框。
- 字段说明：
  - `TGID` 为登录后自动识别的只读字段，不在新增/编辑弹窗中展示或编辑。

## 交互与行为
- 列表操作：
  - 机器人列表：编辑、删除、启用/停用；工具栏含“新增机器人”。
  - 普通账号：编辑、删除；工具栏含“新增普通账户”。
- 表单交互：
  - 保存时校验必填与格式；成功后关闭弹窗并更新当前页签列表。

## 数据模型（示例）
- 机器人列表数据项：
  - `id`: string
  - `botName`: string
  - `botUsername`: string
  - `status`: 'enabled' | 'disabled'
  - `creator`: string
  - `createdAt`: string (ISO)
- 普通账号数据项：
  - `id`: string
  - `name`: string
  - `tgid`: string
  - `phone`: string
  - `apiid`: string
  - `apiHash`: string
  - `secondPassword`: string
  - `status`: 'enabled' | 'disabled'
  - `creator`: string
  - `createdAt`: string (ISO)
- 表单模型：
  - 机器人：`botName`、`botUsername`、`token`、`statusEnabled`
  - 普通账号：`name`、`phone`、`apiid`、`apiHash`、`secondPassword`、`statusEnabled`

## 提示与错误处理
- 成功提示：新增、编辑、删除均显示明确的成功消息。
- 错误提示：网络错误或校验失败时显示错误消息，保留用户输入。

## 非功能性要求
- 与 Element Plus 组件保持一致的视觉与交互。
- 支持本地预览与热更新，代码结构简洁可维护。

## 已移除内容（不再出现）
- 客户端账户类型（含“机器人类型”字段）
- 配对令牌生成与显示
- 配对状态筛选与标签
- 取消配对按钮及相关逻辑

## 验收标准
- 页面包含“机器人列表”“普通账号”两个页签，交互与字段按本文档实现。
- README 与本 PRD 保持一致描述。
- 本地预览运行无错误，两个页签的列表与表单按规范工作。

## 操作记录页面补充说明
- 关联机器人列展示规则：
  - 当 `botInvolved` 为纯数字串时，视为普通账号，右侧展示 `el-tag` 标签“普通账号”。
  - 当 `botInvolved` 为非纯数字（如“机器人A”等名称）时，视为机器人，右侧展示 `el-tag` 标签“机器人”。
- 示例：前六条使用“机器人A”等名称并标注“机器人”；第七条使用数字串 `621152047` 并标注“普通账号”。