# 供应商列表

## 供应商余额逻辑说明

### 1. 余额定义

* 供应商余额用于记录平台与上游渠道的结算关系。
* 每个供应商通道维护一个独立的余额字段，初始值为 **0**。
* 余额支持正负值，**正数表示供应商欠平台**，**负数表示平台欠供应商**（即授信额度内透支）。

### 2. 余额变动规则

| 场景 | 触发动作 | 变动方向 | 变动金额说明 |
|-----|---------|---------|------------|
| 成功订单入账 | 订单状态变更为"交易成功"或"补单成功" | 余额增加 | 实际到账金额 = 订单金额 - 通道成本 |
| 平台收到上游付款（预付） | 财务线下收款 + 人工录入 | 余额减少 | 减去上游打款金额 |
| 修改金额操作 | 修改成功订单金额后重新记账 | 差额重算 | 原账变冲销后重新入账，更新余额 |
| 双向撤销 | 成功订单撤销 | 余额回滚 | 冲销原入账金额，恢复前值 |

### 3. 授信与预警机制

* 支持设置**余额提醒阈值**（可为正数或负数）：
  * 当余额低于该阈值时，触发系统预警或自动禁用通道；
  * 通常将此视为供应商的**授信额度上限**。

### 4. 示例说明

* 初始余额为 0，平台通过该通道完成一笔成功订单，金额为 100 元，通道成本为 1 元：
  * 实际入账 = 100 - 1 = 99 元 → **余额增加为 99 元**
* 上游线下转账 150 元给平台，平台录入：
  * **余额减少 150 元 → 当前余额 = -51 元**
  * 表示平台已多收供应商 51 元，还需通过订单消化

### 5. 注意事项

* 仅订单状态为**交易成功 / 补单成功**的订单才触发余额变动；
* 修改金额或双向撤销时，系统会自动冲销原账变并更新余额；
* **余额仅通过系统记账与人工加减款操作变动，不支持手动直接编辑数值**。

## 供应商余额 & 授信额度｜大白话解释

你可以把平台和供应商之间的合作，想象成一个对账本。

这个账本里最关键的两个概念就是：

### 1. 供应商余额：现在到底谁欠谁钱？

如果我们跑了一堆订单，上游还没结账，那他们"欠我们钱" → 余额是正的

如果上游提前给我们转了钱（比如预付），我们跑单的时候就把钱抵掉了 → 余额可能变负，说明我们欠他钱

所以余额可以是 正的（他欠我们），也可以是 负的（我们欠他）

### 2. 授信额度：允许他最多欠我们多少 / 或我们最多欠他多少

这就是一条"风控底线"

我们不希望上游欠太多钱不还，也不希望我们欠上游太多钱导致风险失控

所以系统支持配置一个「授信额度」：

如果余额低于这个值 → 就报警或直接停掉通道

这个值也可以是正数或负数，表示不同场景：

| 授信额度设为 | 含义 |
|------------|------|
| 正数（如 1,000） | 要求他至少还给我们一笔钱，不能欠太多 |
| 负数（如 -5,000） | 允许我们最多欠他 5,000 块，不再接单 |

### 举个例子来理解：

初始余额是 0，后来跑了一笔 100 元订单，通道成本 10 元 → 入账 90，余额 = 90
后来上游打了 100 块给我们 → 我们就减掉 100 → 当前余额 = -10（我们多收了钱，等于欠他 10 块）

这时候如果授信额度是 -5,000，就说明还在安全线内；
但如果余额到了 -5,500，就超过了允许的透支额度，系统就会预警或自动停通道。

### 一句话总结：

余额告诉你现在谁欠谁；
授信额度告诉你欠到哪一步就不能再继续了。